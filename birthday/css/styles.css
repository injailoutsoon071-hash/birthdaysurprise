:root{
	--bg0:#fff7fb;
	--pink:#ff4fa3;
	--rose:#ff2e63;
	--red:#ff2b2b;
	--wine:#b31237;
	--ink:#1b1020;

	--glass: rgba(255,255,255,.12);
	--glass2: rgba(255,255,255,.08);
	--stroke: rgba(255,255,255,.22);

	--shadow: 0 24px 80px rgba(10,0,20,.35);
	--radius: 22px;

	--ease: cubic-bezier(.2,.9,.2,1);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
	margin:0;
	font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
	color: rgba(255,255,255,.92);
	background: radial-gradient(1200px 600px at 20% 10%, rgba(255,79,163,.25), transparent 60%),
		radial-gradient(900px 500px at 80% 30%, rgba(255,46,99,.18), transparent 55%),
		linear-gradient(120deg, #1a0612, #210414);
	overflow:hidden;
}

/* Animated premium background */
.bg{
	position:fixed; inset:0;
	background:
		radial-gradient(900px 600px at 20% 20%, rgba(255,79,163,.34), transparent 58%),
		radial-gradient(700px 520px at 80% 30%, rgba(255,46,99,.25), transparent 60%),
		linear-gradient(130deg, rgba(255,79,163,.18), rgba(255,46,99,.10), rgba(179,18,55,.16));
	filter: saturate(1.1) contrast(1.05);
	animation: drift 10s var(--ease) infinite alternate;
}
@keyframes drift{
	from{ transform: scale(1.02) translate3d(-1.2%, -1%, 0); filter: blur(0px) saturate(1.1); }
	to{ transform: scale(1.06) translate3d(1.2%, 1%, 0); filter: blur(.2px) saturate(1.2); }
}

#heartsCanvas{
	position:fixed; inset:0;
	width:100%; height:100%;
	pointer-events:none;
	opacity:.55;
	mix-blend-mode: screen;
}

.app{ position:relative; height:100%; }

.screen{
	position:absolute; inset:0;
	display: none; /* hide all screens by default */
	place-items:center; /* already present; works when display is grid */
	padding: min(6vh, 48px) 18px;
	opacity:0;
	transform: translate3d(0, 14px, 0);
	filter: blur(10px);
	pointer-events:none;
	transition: opacity .6s var(--ease), transform .6s var(--ease), filter .6s var(--ease);
}
.screen--active{
	display: grid; /* CHANGED: was block; enables true centering via place-items */
	opacity:1;
	transform: translate3d(0,0,0);
	filter: blur(0px);
	pointer-events:auto;
}

/* HERO */
.hero{
	width:min(980px, 100%);
	text-align:center;
	position:relative;
	padding: 28px 18px 18px;
}
.hero__glow{
	position:absolute; inset:-30px -20px;
	background:
		radial-gradient(600px 240px at 50% 20%, rgba(255,79,163,.30), transparent 60%),
		radial-gradient(720px 260px at 50% 40%, rgba(255,46,99,.20), transparent 60%);
	filter: blur(10px);
	z-index:-1;
}
.hero__title{
	margin: 8px 0 10px;
	font-family: "Great Vibes", cursive;
	font-weight: 400;
	letter-spacing: .2px;
	font-size: clamp(42px, 6vw, 82px);
	line-height: 1.05;
	text-shadow: 0 18px 60px rgba(255,79,163,.25);
}
.hero__subtitle{
	margin:0 0 22px;
	font-weight:300;
	color: rgba(255,255,255,.82);
}

.countdown{
	display:flex;
	gap: 10px;
	justify-content:center;
	align-items:stretch;
	margin: 18px auto 22px;
	flex-wrap:wrap;
}
.countdown__tile{
	min-width: 120px;
	padding: 14px 14px 12px;
	border-radius: 18px;
	background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
	border: 1px solid rgba(255,255,255,.18);
	box-shadow: var(--shadow);
	backdrop-filter: blur(12px);
}
.countdown__num{
	font-size: clamp(28px, 4.5vw, 42px);
	font-weight: 600;
	letter-spacing: .6px;
}
.countdown__label{
	margin-top: 2px;
	font-size: 12px;
	letter-spacing: .18em;
	text-transform: uppercase;
	color: rgba(255,255,255,.75);
}

.cta{ margin-top: 10px; display:grid; gap: 10px; justify-items:center; }

.btn{
	border:0;
	color:white;
	font-weight: 600;
	letter-spacing: .2px;
	padding: 14px 18px;
	border-radius: 999px;
	cursor:pointer;
	background: linear-gradient(135deg, rgba(255,79,163,1), rgba(255,46,99,1));
	box-shadow: 0 18px 55px rgba(255,46,99,.35);
	transform: translate3d(0,0,0);
	transition: transform .22s var(--ease), filter .22s var(--ease), box-shadow .22s var(--ease);
	display:inline-flex;
	gap: 10px;
	align-items:center;
}
.btn:hover{ transform: translate3d(0,-2px,0); filter: brightness(1.03); box-shadow: 0 22px 70px rgba(255,46,99,.45); }
.btn:active{ transform: translate3d(0,0,0) scale(.99); }
.btn:disabled{ cursor:not-allowed; opacity:.92; }

.btn--locked{
	filter: blur(.8px) saturate(.85);
	background: linear-gradient(135deg, rgba(255,79,163,.55), rgba(255,46,99,.35));
	box-shadow: 0 16px 50px rgba(0,0,0,.28);
}
.btn__icon{ font-size: 16px; }
.cta__note{ font-size: 13px; color: rgba(255,255,255,.76); }

.musicToggle{
	position: fixed;
	right: 14px;
	bottom: 14px;
	z-index: 5;
	border-radius: 999px;
	border: 1px solid rgba(255,255,255,.18);
	background: rgba(255,255,255,.10);
	color: rgba(255,255,255,.85);
	backdrop-filter: blur(12px);
	padding: 10px 12px;
	display:flex;
	gap: 10px;
	align-items:center;
	cursor:pointer;
	transition: transform .22s var(--ease), background .22s var(--ease);
}
.musicToggle:hover{ transform: translate3d(0,-2px,0); background: rgba(255,255,255,.14); }
.musicToggle__dot{
	width: 10px; height: 10px;
	border-radius: 50%;
	background: rgba(255,255,255,.35);
	box-shadow: 0 0 0 0 rgba(255,79,163,.0);
} 
.musicToggle[aria-pressed="true"] .musicToggle__dot{
	background: rgba(255,79,163,1);
	box-shadow: 0 0 0 10px rgba(255,79,163,.14);
}

/* LOGIN CARD */
.card{
	width: min(520px, 100%);
	position:relative;
	border-radius: var(--radius);
	background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
	border: 1px solid rgba(255,255,255,.18);
	box-shadow: var(--shadow);
	backdrop-filter: blur(16px);
	overflow:hidden;
}
.card__border{
	position:absolute; inset:-2px;
	background: conic-gradient(from 180deg, rgba(255,79,163,.0), rgba(255,79,163,.55), rgba(255,46,99,.55), rgba(255,79,163,.0));
	filter: blur(18px);
	opacity:.75;
}
.card__content{ position:relative; padding: 26px 22px 20px; }
.card__title{
	margin: 0 0 6px;
	font-size: 22px;
	letter-spacing: .2px;
}
.card__subtitle{
	margin:0 0 16px;
	color: rgba(255,255,255,.78);
	font-weight: 300;
}

.field{ display:grid; gap:8px; margin: 12px 0 8px; }
.field__label{ font-size: 12px; letter-spacing: .16em; text-transform: uppercase; color: rgba(255,255,255,.72); }
.field__input{
	width:100%;
	border-radius: 14px;
	border: 1px solid rgba(255,255,255,.18);
	background: rgba(10,0,20,.25);
	color: rgba(255,255,255,.92);
	padding: 14px 14px;
	outline:none;
	transition: box-shadow .2s var(--ease), border-color .2s var(--ease), transform .2s var(--ease);
}
.field__input:focus{
	border-color: rgba(255,79,163,.65);
	box-shadow: 0 0 0 6px rgba(255,79,163,.14);
	transform: translate3d(0,-1px,0);
}

.hint{
	margin: 8px 0 0;
	font-size: 13px;
	color: rgba(255,255,255,.75);
}
.error{
	min-height: 18px;
	margin-top: 10px;
	font-size: 13px;
	color: rgba(255,255,255,.82);
	opacity:.95;
}
.linkBack{
	margin-top: 12px;
	background: transparent;
	color: rgba(255,255,255,.78);
	border: 0;
	cursor: pointer;
	padding: 8px 6px;
	opacity:.9;
}
.linkBack:hover{ opacity: 1; text-decoration: underline; }

@keyframes softShake{
	0%,100%{ transform: translate3d(0,0,0); }
	20%{ transform: translate3d(-7px,0,0); }
	40%{ transform: translate3d(7px,0,0); }
	60%{ transform: translate3d(-5px,0,0); }
	80%{ transform: translate3d(5px,0,0); }
}
.shake{ animation: softShake .42s var(--ease); }

/* GALLERY */
.gallery{
	position:relative;
	width: min(1100px, 100%);
	height: min(800px, 100%);
	display:grid;
	grid-template-rows: auto 1fr;
	gap: 14px;
}
.gallery__bg{
	position:absolute; inset:-20px;
	background-size: cover;
	background-position:center;
	filter: blur(26px) saturate(1.15) brightness(.85);
	opacity:.65;
	transform: scale(1.08);
	z-index:-1;
}
.gallery__topbar{
	display:flex;
	align-items:center;
	justify-content:space-between;
	gap: 10px;
	padding: 10px 10px 0;
}
.gallery__brand{
	font-family: "Great Vibes", cursive;
	font-size: 34px;
	letter-spacing: .2px;
	text-shadow: 0 18px 60px rgba(255,79,163,.22);
}
.gallery__actions{ display:flex; gap: 10px; align-items:center; }

.chip{
	border-radius: 999px;
	padding: 10px 12px;
	border: 1px solid rgba(255,255,255,.18);
	background: rgba(255,255,255,.10);
	color: rgba(255,255,255,.85);
	backdrop-filter: blur(12px);
	cursor:pointer;
	transition: transform .22s var(--ease), background .22s var(--ease);
}
.chip:hover{ transform: translate3d(0,-2px,0); background: rgba(255,255,255,.14); }
.chip[aria-pressed="true"]{ background: rgba(255,79,163,.22); border-color: rgba(255,79,163,.35); }
.chip--ghost{ background: rgba(255,255,255,.06); }

.viewer{
	display:grid;
	place-items:center;
	padding: 0 10px 12px;
}
.memory{
	width: min(720px, 100%);
	margin: 0;
	border-radius: var(--radius);
	overflow:hidden;
	background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
	border: 1px solid rgba(255,255,255,.18);
	box-shadow: var(--shadow);
	backdrop-filter: blur(12px);
	transform: translate3d(0,0,0);
}
.memory__img{
	display:block;
	width: 100%;
	height: min(60vh, 520px);
	object-fit: cover;
	transform: scale(1.02);
	transition: transform 1.4s var(--ease);
}
.memory__img--contain{
	object-fit: contain;
	background: transparent;
	transform: none;
}
.memory__img--contain{
	object-fit: contain;
	background: transparent;
	transform: none;
}
.memory:hover .memory__img{ transform: scale(1.05); }

.memory__caption{
	padding: 16px 16px 18px;
}
.memory__title{
	font-weight: 600;
	font-size: 16px;
	letter-spacing: .2px;
}
.memory__text{
	margin-top: 8px;
	color: rgba(255,255,255,.82);
	font-weight: 300;
	line-height: 1.45;
}

.viewer__nav{
	margin-top: 12px;
	display:flex;
	gap: 10px;
	flex-wrap:wrap;
	justify-content:center;
}
.navBtn{
	border-radius: 999px;
	padding: 12px 14px;
	border: 1px solid rgba(255,255,255,.18);
	background: rgba(255,255,255,.10);
	color: rgba(255,255,255,.88);
	backdrop-filter: blur(12px);
	cursor:pointer;
	transition: transform .22s var(--ease), background .22s var(--ease), box-shadow .22s var(--ease);
}
.navBtn:hover{ transform: translate3d(0,-2px,0); background: rgba(255,255,255,.14); }
.navBtn--primary{
	background: linear-gradient(135deg, rgba(255,79,163,1), rgba(255,46,99,1));
	border-color: rgba(255,255,255,.15);
	box-shadow: 0 18px 55px rgba(255,46,99,.30);
}

@media (max-width: 520px){
	.countdown__tile{ min-width: 46%; }
	.gallery{ height: 100%; }
	.memory__img{ height: 52vh; }
}

/* Fullscreen mode for last image (no title/text) */
body.is-fullscreen-memory .gallery__topbar{
	position: static;      /* revert overlay */
	top: auto;
	left: auto;
	right: auto;
	z-index: auto;

	padding: 10px 10px 0; /* same as normal */
	border-radius: 0;
	background: transparent;
	backdrop-filter: none;
}

body.is-fullscreen-memory .gallery__actions{
	padding: 0;           /* revert pill styling */
	border-radius: 0;
	background: transparent;
	backdrop-filter: none;
}

/* keep viewer padding/layout same as normal slides */
body.is-fullscreen-memory .viewer{
	display: grid;
	place-items: center;
	padding: 0 0 12px; /* was 0 10px 12px */
	height: auto;
}

/* keep the image centered + rounded without changing header/nav positions */
body.is-fullscreen-memory .memory{
	width: min(1100px, 100%);
	height: auto;
	display: block;

	border-radius: var(--radius);
	border: 1px solid rgba(255,255,255,.18);
	box-shadow: var(--shadow);
	background: transparent;     /* was glass gradient */
	backdrop-filter: none;       /* was blur(12px) */
}

body.is-fullscreen-memory .memory__img{
	height: min(70vh, 620px); /* bigger than normal, still within layout */
	width: 100%;
	object-fit: contain;
	transform: none;
	background: transparent;

	border-radius: var(--radius);
}

/* Letter layout for last memory (07.jpg) */
body.is-letter-memory .memory{
	display: grid;
	grid-template-columns: 1fr 1fr;
	align-items: stretch;
	gap: 0;
}

body.is-letter-memory .memory__img{
	height: min(70vh, 620px);
	width: 100%;
	object-fit: cover;
	transform: none;
	border-radius: 0;
}

body.is-letter-memory .memory__caption{
	display: block !important; /* ensure caption shows */
	padding: 18px 18px 18px;
	overflow: auto;
	max-height: min(70vh, 620px);
	text-align: left;
}

body.is-letter-memory .memory__title{
	font-size: 18px;
}

body.is-letter-memory .memory__text{
	white-space: pre-wrap; /* preserve your line breaks */
	line-height: 1.7;
}

/* Responsive fall-back: stack on small screens */
@media (max-width: 820px){
	body.is-letter-memory .memory{
		grid-template-columns: 1fr;
	}
	body.is-letter-memory .memory__img,
	body.is-letter-memory .memory__caption{
		max-height: none;
	}
}
